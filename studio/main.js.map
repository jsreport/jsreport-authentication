{"version":3,"sources":["webpack:///webpack/bootstrap d0f6916e1b23798e7286","webpack:///./studio/main_dev.js","webpack:///./studio/UserEditor.js","webpack:///external \"Studio.libraries['react']\"","webpack:///./studio/ChangePasswordModal.js","webpack:///external \"Studio\"","webpack:///./studio/LogoutSettingsButton.js","webpack:///./studio/ChangePasswordSettingsButton.js","webpack:///./studio/ChangePasswordButton.js","webpack:///./studio/NewUserModal.js"],"names":["Studio","initializeListeners","unshift","api","get","response","tenant","authentication","user","useEditorComponents","isAdmin","addEntitySet","name","faIcon","visibleName","nameAttribute","onNew","options","openModal","NewUserModal","entityTreePosition","addEditorComponent","UserEditor","addToolbarComponent","ChangePasswordButton","ChangePasswordSettingsButton","username","LogoutSettingsButton","DataEditor","props","entity","__isNew","password","ChangePasswordModal","onUpdate","map","c","i","Component","propTypes","React","PropTypes","object","isRequired","func","state","close","data","newPassword","refs","newPassword1","value","oldPassword","post","shortid","newPassword2","setState","apiError","message","passwordError","validatePassword","color","display","changePassword","logout","click","cursor","resolveUrl","tab","__entitySet","e","setTimeout","focus","key","createUser","defaults","Object","assign","userNameError","password1","addExistingEntity","password2","validateUsername","handleKeyPress"],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d0f6916e1b23798e7286\n **/","import UserEditor from './UserEditor.js'\r\nimport LogoutSettingsButton from './LogoutSettingsButton.js'\r\nimport ChangePasswordSettingsButton from './ChangePasswordSettingsButton.js'\r\nimport ChangePasswordButton from './ChangePasswordButton.js'\r\nimport Studio from 'jsreport-studio'\r\nimport NewUserModal from './NewUserModal.js'\r\n\r\n// we want to be at the front, because other extension like scheduling relies on loaded user\r\nStudio.initializeListeners.unshift(async () => {\r\n  const response = await Studio.api.get('/api/settings')\r\n\r\n  if (!response.tenant) {\r\n    // authentication not enabled in config\r\n    return\r\n  }\r\n\r\n  Studio.authentication = { user: response.tenant, useEditorComponents: [] }\r\n\r\n  if (Studio.authentication.user.isAdmin) {\r\n    Studio.addEntitySet({\r\n      name: 'users',\r\n      faIcon: 'fa-user',\r\n      visibleName: 'user',\r\n      nameAttribute: 'username',\r\n      onNew: (options) => Studio.openModal(NewUserModal, options),\r\n      entityTreePosition: 200\r\n    })\r\n    Studio.addEditorComponent('users', UserEditor)\r\n    Studio.addToolbarComponent(ChangePasswordButton)\r\n  }\r\n\r\n  Studio.addToolbarComponent(ChangePasswordSettingsButton, 'settings')\r\n  Studio.addToolbarComponent(() => <div className='toolbar-button'><span><i\r\n    className='fa fa-user' /> {Studio.authentication.user.username}</span></div>, 'settingsBottom')\r\n  Studio.addToolbarComponent(LogoutSettingsButton, 'settingsBottom')\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class DataEditor extends Component {\r\n  componentDidMount () {\r\n    if (this.props.entity.__isNew && !this.props.entity.password) {\r\n      Studio.openModal(ChangePasswordModal, { entity: this.props.entity })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity, onUpdate } = this.props\r\n\r\n    return <div className='custom-editor'>\r\n      <h1><i className='fa fa-user' /> {entity.username}</h1>\r\n      <div>\r\n        {Studio.authentication.useEditorComponents.map((c, i) => <div key={i}>{c(entity, onUpdate)}</div>)}\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nDataEditor.propTypes = {\r\n  entity: React.PropTypes.object.isRequired,\r\n  onUpdate: React.PropTypes.func.isRequired\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/UserEditor.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordModal extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  async changePassword () {\r\n    const { entity } = this.props.options\r\n    const { close } = this.props\r\n\r\n    try {\r\n      let data = {\r\n        newPassword: this.refs.newPassword1.value\r\n      }\r\n\r\n      if (!Studio.authentication.user.isAdmin) {\r\n        data.oldPassword = this.refs.oldPassword.value\r\n      }\r\n\r\n      await Studio.api.post(`/api/users/${entity.shortid}/password`, { data: data })\r\n      this.refs.newPassword1.value = ''\r\n      this.refs.newPassword2.value = ''\r\n      close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.newPassword2.value && this.refs.newPassword2.value !== this.refs.newPassword1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      {Studio.authentication.user.isAdmin ? '' : <div className='form-group'>\r\n        <label>old password</label>\r\n        <input type='password' autoComplete='off' ref='oldPassword' />\r\n      </div>\r\n      }\r\n      <div className='form-group'>\r\n        <label>new password</label>\r\n        <input type='password' autoComplete='off' ref='newPassword1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>new password verification</label>\r\n        <input type='password' autoComplete='off' ref='newPassword2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.changePassword()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nChangePasswordModal.propTypes = {\r\n  close: PropTypes.func.isRequired,\r\n  options: PropTypes.object.isRequired\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordModal.js\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 4\n ** module chunks = 0\n **/","import React, { Component } from 'react'\nimport Studio from 'jsreport-studio'\n\nexport default class LogoutSettingsButton extends Component {\n  render () {\n    return <div>\n      <div\n        onClick={() => this.refs.logout.click()} style={{ cursor: 'pointer' }}>\n        <form method='POST' action={Studio.resolveUrl('/logout')}>\n          <input ref='logout' type='submit' id='logoutBtn' style={{ display: 'none' }} />\n        </form>\n        <i className='fa fa-power-off' /> Logout\n      </div>\n    </div>\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/LogoutSettingsButton.js\n **/","import ChangePasswordModal from './ChangePasswordModal.js'\nimport Studio from 'jsreport-studio'\n\nexport default (props) => {\n  return Studio.authentication.user.isAdmin ? <span /> : <div>\n    <a\n      id='changePassword'\n      onClick={() => Studio.openModal(ChangePasswordModal, { entity: Studio.authentication.user })}\n      style={{cursor: 'pointer'}}><i className='fa fa-key' /> Change password\n    </a>\n  </div>\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordSettingsButton.js\n **/","import React, { Component } from 'react'\r\nimport ChangePasswordModal from './ChangePasswordModal.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class ChangePasswordButton extends Component {\r\n  render () {\r\n    if (!this.props.tab || !this.props.tab.entity || this.props.tab.entity.__entitySet !== 'users') {\r\n      return <span />\r\n    }\r\n\r\n    return <div>\r\n      <div\r\n        className='toolbar-button'\r\n        onClick={(e) => Studio.openModal(ChangePasswordModal, { entity: this.props.tab.entity })}>\r\n        <i className='fa fa-key' /> Change Password\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nChangePasswordButton.propTypes = {\r\n  tab: React.PropTypes.object,\r\n  onUpdate: React.PropTypes.func.isRequired\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/ChangePasswordButton.js\n **/","import React, {Component, PropTypes} from 'react'\r\nimport Studio from 'jsreport-studio'\r\n\r\nexport default class NewUserModal extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {}\r\n  }\r\n\r\n  componentDidMount () {\r\n    setTimeout(() => this.refs.username.focus(), 0)\r\n  }\r\n\r\n  handleKeyPress (e) {\r\n    if (e.key === 'Enter') {\r\n      this.createUser()\r\n    }\r\n  }\r\n\r\n  async createUser () {\r\n    let entity = {}\r\n\r\n    if (this.props.options.defaults != null) {\r\n      entity = Object.assign(entity, this.props.options.defaults)\r\n    }\r\n\r\n    if (!this.refs.username.value) {\r\n      return this.setState({ userNameError: true })\r\n    }\r\n\r\n    if (!this.refs.password1.value) {\r\n      return this.setState({ passwordError: true })\r\n    }\r\n\r\n    entity.username = this.refs.username.value\r\n    entity.password = this.refs.password1.value\r\n\r\n    try {\r\n      let response = await Studio.api.post('/odata/users', {\r\n        data: entity\r\n      })\r\n\r\n      response.__entitySet = 'users'\r\n\r\n      Studio.addExistingEntity(response)\r\n      this.props.close()\r\n    } catch (e) {\r\n      this.setState({ apiError: e.message })\r\n    }\r\n  }\r\n\r\n  validatePassword () {\r\n    this.setState(\r\n      {\r\n        passwordError: this.refs.password2.value && this.refs.password2.value !== this.refs.password1.value,\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  validateUsername () {\r\n    this.setState(\r\n      {\r\n        userNameError: this.refs.username.value === '',\r\n        apiError: null\r\n      })\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      <div className='form-group'>\r\n        <label>Username</label>\r\n        <input type='text' ref='username' onChange={() => this.validateUsername()} onKeyPress={(e) => this.handleKeyPress(e)} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Password</label>\r\n        <input type='password' autoComplete='off' ref='password1' />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label>Password verification</label>\r\n        <input type='password' autoComplete='off' ref='password2' onChange={() => this.validatePassword()} />\r\n      </div>\r\n      <div className='form-group'>\r\n        <span style={{color: 'red', display: this.state.passwordError ? 'block' : 'none'}}>password doesn't match</span>\r\n        <span\r\n          style={{color: 'red', display: this.state.userNameError ? 'block' : 'none'}}>username must be filled</span>\r\n        <span style={{color: 'red', display: this.state.apiError ? 'block' : 'none'}}>{this.state.apiError}</span>\r\n      </div>\r\n      <div className='button-bar'>\r\n        <button className='button confirmation' onClick={() => this.createUser()}>ok</button>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nNewUserModal.propTypes = {\r\n  close: PropTypes.func.isRequired\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/NewUserModal.js\n **/"],"sourceRoot":""}